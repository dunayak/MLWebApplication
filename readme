
## Deploying ML Model using Flask
This is a university project to demonstrate the Machine Learning model using Flask API

### Prerequisites
You must have anaconda jupyter notebook, Pandas,numpy, Scikit Learn, Flask and flask and flask_caching installed.

Flask version: 0.12.2
i.e. conda install flask=0.12.2  (or) pip install Flask==0.12.2

### Project Structure
This project has four major parts :
1. HoneyData.ipynb - This contains the code for Machine Learning models to predict the right label of the honey sample.
                     It exports (dumps) few best models to the local file system and those model files will be used in Webapplication (User Interface)
2. webapp.py - This contains Flask APIs that uses the test Dataset file made of honey samples collected by food authenticity investigations that use infrared (NIR) spectroscopy and predict the right label using the models created through point 1 (using HoneyData.ipynb file).
3. template - This contains the HTML template (flaskindex.html), which shows about information/ project details and also allows user to upload the dataset and choose to predict.

4. static - There is a css folder under this and which has a styles.css file which is being used in flaskindex.html file as styling template. 
            Under the css folder and is another sub folder which holds the eastern university logo file.
            data folder: which stores the dataset files in csv file to be used in User Interface.
            image folder: which contains the images used in the User Interface
            js folder: which contains javascript file.
            Graphs: This folder holds the image file of confusion matrixes generated by running HoneyData.ipynb file.
            models folder: which contains the few top performing model files to be used by User Interface.



### Step to run the project
1. Go to the application home directory

1. Login to the AWS console and create AWS EC2 instance (I used ubuntu OS) with public IP and open the security rule to accept the traffic from 0.0.0.0/0 (or as applicable)

2. Open the terminal/ putty from local desktop/laptop and connect AWS EC2 instance using ssh

i.e. ssh -i "PGdushyant.pem" ubuntu@ec2-18-207-112-63.compute-1.amazonaws.com
Use the key which was used to launched the instance

3- Once instance is connected run below commands in the same sequence

5- git clone https://github.com/dunayak/MLWebApplication

6- cd MLWebApplication

   sh ./prereq.sh  - This will install all softwares, open port needed to run the application

7- Run below command to run CreateModels.py file, this file will apply the dimension reduction technique (PCA) to the train/ test dataset and fit the training dataset to the various models and create the model files using pickle in static/Models. This will also create a confusion matrix and the same image to the static/Graphs directory.

   python3 CreateModels.py

8-Run webapp.py using below command to start Flask API

sudo python3 webapp.py
Application will run in port 80

7. Navigate to URL http://ec2-18-207-112-63.compute-1.amazonaws.com:80

You should be able to view the homepage (About me).

- After going through the About me, Project Details, please navigate to Instructions tab and follow the instructions to use application and predict the Honey Labels.

